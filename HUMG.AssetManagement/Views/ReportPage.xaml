<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:microcharts="clr-namespace:Microcharts.Maui;assembly=Microcharts.Maui"
             x:Class="HUMG.AssetManagement.Views.ReportPage"
             Title="BÃ¡o cÃ¡o Thá»‘ng kÃª"
             BackgroundColor="#F5F5F5">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">

            <!-- Header bÃ¡o cÃ¡o -->
            <Border BackgroundColor="#0066CC"
        StrokeThickness="0"
        Padding="20"
        StrokeShape="RoundRectangle 15">
                <HorizontalStackLayout Spacing="15" HorizontalOptions="Center">
                    <Image Source="humg_logo.png"
               HeightRequest="60"
               WidthRequest="60"
               Aspect="AspectFit"/>
                    <VerticalStackLayout Spacing="5" VerticalOptions="Center">
                        <Label Text="ðŸ“Š BÃO CÃO THá»NG KÃŠ TÃ€I Sáº¢N"
                   FontSize="20"
                   FontAttributes="Bold"
                   TextColor="White"
                   HorizontalTextAlignment="Center"/>
                        <Label x:Name="ReportDateLabel"
                   Text="Cáº­p nháº­t: 23/11/2025"
                   FontSize="14"
                   TextColor="White"
                   HorizontalTextAlignment="Center"/>
                    </VerticalStackLayout>
                </HorizontalStackLayout>
            </Border>

            <!-- Tá»•ng quan sá»‘ liá»‡u -->
            <Label Text="Tá»”NG QUAN"
                   FontSize="18"
                   FontAttributes="Bold"
                   TextColor="#0066CC"/>

            <Grid ColumnDefinitions="*,*" ColumnSpacing="15" RowSpacing="15">
                <!-- Tá»•ng tÃ i sáº£n -->
                <Border Grid.Column="0"
                        BackgroundColor="White"
                        StrokeThickness="0"
                        Padding="15"
                        StrokeShape="RoundRectangle 12">
                    <VerticalStackLayout Spacing="8">
                        <Label Text="ðŸ“¦" FontSize="32" HorizontalTextAlignment="Center"/>
                        <Label x:Name="TotalAssetsLabel"
                               Text="0"
                               FontSize="28"
                               FontAttributes="Bold"
                               TextColor="#0066CC"
                               HorizontalTextAlignment="Center"/>
                        <Label Text="Tá»•ng tÃ i sáº£n"
                               FontSize="14"
                               TextColor="#666"
                               HorizontalTextAlignment="Center"/>
                    </VerticalStackLayout>
                </Border>

                <!-- Tá»•ng giÃ¡ trá»‹ -->
                <Border Grid.Column="1"
                        BackgroundColor="White"
                        StrokeThickness="0"
                        Padding="15"
                        StrokeShape="RoundRectangle 12">
                    <VerticalStackLayout Spacing="8">
                        <Label Text="ðŸ’°" FontSize="32" HorizontalTextAlignment="Center"/>
                        <Label x:Name="TotalValueLabel"
                               Text="0Ä‘"
                               FontSize="24"
                               FontAttributes="Bold"
                               TextColor="#FF9800"
                               HorizontalTextAlignment="Center"/>
                        <Label Text="Tá»•ng giÃ¡ trá»‹"
                               FontSize="14"
                               TextColor="#666"
                               HorizontalTextAlignment="Center"/>
                    </VerticalStackLayout>
                </Border>
            </Grid>

            <!-- Biá»ƒu Ä‘á»“ tráº¡ng thÃ¡i -->
            <Label Text="THá»NG KÃŠ THEO TRáº NG THÃI"
                   FontSize="18"
                   FontAttributes="Bold"
                   TextColor="#0066CC"
                   Margin="0,10,0,0"/>

            <Border BackgroundColor="White"
                    StrokeThickness="0"
                    Padding="15"
                    StrokeShape="RoundRectangle 12">
                <VerticalStackLayout Spacing="15">
                    <microcharts:ChartView x:Name="StatusChart"
                                          HeightRequest="250"/>

                    <!-- ChÃº thÃ­ch -->
                    <Grid ColumnDefinitions="*,*" RowSpacing="10">
                        <HorizontalStackLayout Grid.Column="0" Spacing="10">
                            <BoxView Color="#4CAF50" WidthRequest="20" HeightRequest="20" CornerRadius="3"/>
                            <VerticalStackLayout Spacing="2">
                                <Label Text="Äang sá»­ dá»¥ng" FontSize="12" TextColor="#333"/>
                                <Label x:Name="InUseCountLabel" Text="0 tÃ i sáº£n" FontSize="11" TextColor="#999"/>
                            </VerticalStackLayout>
                        </HorizontalStackLayout>

                        <HorizontalStackLayout Grid.Column="1" Spacing="10">
                            <BoxView Color="#F44336" WidthRequest="20" HeightRequest="20" CornerRadius="3"/>
                            <VerticalStackLayout Spacing="2">
                                <Label Text="Há»ng" FontSize="12" TextColor="#333"/>
                                <Label x:Name="DamagedCountLabel" Text="0 tÃ i sáº£n" FontSize="11" TextColor="#999"/>
                            </VerticalStackLayout>
                        </HorizontalStackLayout>

                        <HorizontalStackLayout Grid.Row="1" Grid.Column="0" Spacing="10">
                            <BoxView Color="#999999" WidthRequest="20" HeightRequest="20" CornerRadius="3"/>
                            <VerticalStackLayout Spacing="2">
                                <Label Text="Thanh lÃ½" FontSize="12" TextColor="#333"/>
                                <Label x:Name="RetiredCountLabel" Text="0 tÃ i sáº£n" FontSize="11" TextColor="#999"/>
                            </VerticalStackLayout>
                        </HorizontalStackLayout>
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- Biá»ƒu Ä‘á»“ theo loáº¡i -->
            <Label Text="THá»NG KÃŠ THEO LOáº I TÃ€I Sáº¢N"
                   FontSize="18"
                   FontAttributes="Bold"
                   TextColor="#0066CC"
                   Margin="0,10,0,0"/>

            <Border BackgroundColor="White"
                    StrokeThickness="0"
                    Padding="15"
                    StrokeShape="RoundRectangle 12">
                <VerticalStackLayout Spacing="10">
                    <microcharts:ChartView x:Name="CategoryChart"
                                          HeightRequest="250"/>
                </VerticalStackLayout>
            </Border>

            <!-- Thá»‘ng kÃª theo phÃ²ng ban -->
            <Label Text="THá»NG KÃŠ THEO PHÃ’NG BAN"
                   FontSize="18"
                   FontAttributes="Bold"
                   TextColor="#0066CC"
                   Margin="0,10,0,0"/>

            <Border BackgroundColor="White"
                    StrokeThickness="0"
                    Padding="15"
                    StrokeShape="RoundRectangle 12">
                <CollectionView x:Name="DepartmentCollectionView"
                               HeightRequest="300">
                    <CollectionView.EmptyView>
                        <Label Text="ChÆ°a cÃ³ dá»¯ liá»‡u"
                               TextColor="#999"
                               HorizontalTextAlignment="Center"
                               Margin="0,20,0,0"/>
                    </CollectionView.EmptyView>

                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Border Margin="0,5,0,5"
                                    Padding="15"
                                    BackgroundColor="#F8F8F8"
                                    StrokeThickness="0"
                                    StrokeShape="RoundRectangle 10">
                                <Grid ColumnDefinitions="*,Auto,Auto" ColumnSpacing="15">
                                    <Label Grid.Column="0"
                                           Text="{Binding DepartmentName}"
                                           FontSize="14"
                                           FontAttributes="Bold"
                                           TextColor="#333"
                                           VerticalOptions="Center"/>
                                    <Label Grid.Column="1"
                                           Text="{Binding Count, StringFormat='{0} TS'}"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           TextColor="#0066CC"
                                           VerticalOptions="Center"/>
                                    <Label Grid.Column="2"
                                           Text="{Binding TotalValue, StringFormat='{0:N0}Ä‘'}"
                                           FontSize="14"
                                           TextColor="#FF9800"
                                           VerticalOptions="Center"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Border>

            <!-- NÃºt xuáº¥t bÃ¡o cÃ¡o -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="15" Margin="0,10,0,20">
                <Button Grid.Column="0"
                        Text="ðŸ“„ Xuáº¥t PDF"
                        BackgroundColor="#0066CC"
                        TextColor="White"
                        CornerRadius="10"
                        HeightRequest="50"
                        Clicked="OnExportPdfClicked"/>
                <Button Grid.Column="1"
                        Text="ðŸ“Š Xuáº¥t Excel"
                        BackgroundColor="#4CAF50"
                        TextColor="White"
                        CornerRadius="10"
                        HeightRequest="50"
                        Clicked="OnExportExcelClicked"/>
            </Grid>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>